PROJECT DEPENDENCIES
=================================================================================================
The project has the following dependencies:
1. FSWebCam - command line utility for taking a picture from the webcam

2. Python - for interacting with the temperature sensor

3. Adafruit_DHT python library - for interacting with the temperature sensor from Python

4. PHP and Apache2 - used to power the front-end website

5. Wiringpi - provides easy to use command for reading and writing to GPIO pins for toggling the switch and reading from the magnetic relay (http://wiringpi.com/download-and-install/)

6. Twitter Bootstrap - leveraged the twitter bootstrap for styling of the website, these files are contained within the www directory already as part of this project.



PROJECT SOFTWARE SETUP
=================================================================================================
Before starting, ensure the dependencies are met and the hardware is setup and configured.  See the wiki for more information on the hardware setup.

1. Get Raspberry Pi setup with Raspian (Debian Wheezy)

2. Confirm internet connection via WIFI. 

3. Install wiringpi (see link above)

4. Install PHP / Apache2
sudo apt-get install apache2
sudo apt-get install php5
sudo apt-get install libapache2-mod-php5
sudo /etc/init.d/apache2 restart

5. Install Adafruit_DHT python library:
git clone https://github.com/adafruit/Adafruit_Python_DHT.git
cd Adafruit_Python_DHT
sudo apt-get install build-essential python-dev
sudo python setup.py install

6. Setup www-data account used by the web server with permissions to execute fswebcam and the python script without a password:
sudo visudo
www-data ALL=(ALL) NOPASSWD: /usr/bin/fswebcam, /var/www/getGarageTemp

7. The magnetic switch leverages a pull down mode for the GPIO pin that it was connected to...in my case wiringpi pin 0.  To accomplish setting this and also setting the default state of the relay switch on wiringpi pin 1. I leveraged a script in /etc/init.d/garageinit.sh that looked like this:

File contents of /etc/init.d/garageinit.sh:

case "$1" in
start)
echo "Starting Relay"
# Turn 1 on which keeps relay off
/usr/local/bin/gpio mode 0 down
/usr/local/bin/gpio write 1 1
#Start Gpio
/usr/local/bin/gpio mode 1 out
;;
stop)
echo "Stopping gpio"
;;
*)
echo "Usage: /etc/init.d/garagerelay {start|stop}"
exit 1
;;
esac
exit 0

This startup script is executed via rc.local on startup of the pi.

7. Copy the www files down:
git clone https://github.com/beckerben/GarageDoorRaspberryPi.git
copy the www files from the project to your apache www directory

8. Setup the password in the www/index.php file and tweak the page.

9. Setup the getGarageTemp with the GPIO pin number for the DHT11, in my case GPIO 27.

10. Setup the garage_status.php referencing the correct wiringpi pins for the magnetic sensor and relay switch.  Also change your location for the JSON call for outdoor temperature.

11. Plugin a compatible webcam via USB.

12.  If all goes well, you should be able to hit the page via a browser and login.  I used NAT routing to allow external access to my opener.  


